{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n0 && (module.exports = {\n  RedirectType: null,\n  getRedirectError: null,\n  redirect: null,\n  permanentRedirect: null,\n  isRedirectError: null,\n  getURLFromRedirectError: null,\n  getRedirectTypeFromError: null\n});\nfunction _export(target, all) {\n  for (var name in all) Object.defineProperty(target, name, {\n    enumerable: true,\n    get: all[name]\n  });\n}\n_export(exports, {\n  RedirectType: function () {\n    return RedirectType;\n  },\n  getRedirectError: function () {\n    return getRedirectError;\n  },\n  redirect: function () {\n    return redirect;\n  },\n  permanentRedirect: function () {\n    return permanentRedirect;\n  },\n  isRedirectError: function () {\n    return isRedirectError;\n  },\n  getURLFromRedirectError: function () {\n    return getURLFromRedirectError;\n  },\n  getRedirectTypeFromError: function () {\n    return getRedirectTypeFromError;\n  }\n});\nconst _requestasyncstorageexternal = require(\"./request-async-storage.external\");\nconst REDIRECT_ERROR_CODE = \"NEXT_REDIRECT\";\nvar RedirectType;\n(function (RedirectType) {\n  RedirectType[\"push\"] = \"push\";\n  RedirectType[\"replace\"] = \"replace\";\n})(RedirectType || (RedirectType = {}));\nfunction getRedirectError(url, type, permanent) {\n  if (permanent === void 0) permanent = false;\n  const error = new Error(REDIRECT_ERROR_CODE);\n  error.digest = REDIRECT_ERROR_CODE + \";\" + type + \";\" + url + \";\" + permanent;\n  const requestStore = _requestasyncstorageexternal.requestAsyncStorage.getStore();\n  if (requestStore) {\n    error.mutableCookies = requestStore.mutableCookies;\n  }\n  return error;\n}\nfunction redirect(url, type) {\n  if (type === void 0) type = \"replace\";\n  throw getRedirectError(url, type, false);\n}\nfunction permanentRedirect(url, type) {\n  if (type === void 0) type = \"replace\";\n  throw getRedirectError(url, type, true);\n}\nfunction isRedirectError(error) {\n  if (typeof (error == null ? void 0 : error.digest) !== \"string\") return false;\n  const [errorCode, type, destination, permanent] = error.digest.split(\";\", 4);\n  return errorCode === REDIRECT_ERROR_CODE && (type === \"replace\" || type === \"push\") && typeof destination === \"string\" && (permanent === \"true\" || permanent === \"false\");\n}\nfunction getURLFromRedirectError(error) {\n  if (!isRedirectError(error)) return null;\n  // Slices off the beginning of the digest that contains the code and the\n  // separating ';'.\n  return error.digest.split(\";\", 3)[2];\n}\nfunction getRedirectTypeFromError(error) {\n  if (!isRedirectError(error)) {\n    throw new Error(\"Not a redirect error\");\n  }\n  return error.digest.split(\";\", 3)[1];\n}\nif ((typeof exports.default === 'function' || typeof exports.default === 'object' && exports.default !== null) && typeof exports.default.__esModule === 'undefined') {\n  Object.defineProperty(exports.default, '__esModule', {\n    value: true\n  });\n  Object.assign(exports.default, exports);\n  module.exports = exports.default;\n}","map":{"version":3,"names":["getRedirectError","redirect","permanentRedirect","isRedirectError","getURLFromRedirectError","getRedirectTypeFromError","REDIRECT_ERROR_CODE","RedirectType","url","type","permanent","error","Error","digest","requestStore","_requestasyncstorageexternal","requestAsyncStorage","getStore","mutableCookies","errorCode","destination","split"],"sources":["../../../src/client/components/redirect.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;EAegBA,gBAAgB,WAAAA,CAAA;WAAhBA,gBAAA;;EAqBAC,QAAQ,WAAAA,CAAA;WAARA,QAAA;;EAcAC,iBAAiB,WAAAA,CAAA;WAAjBA,iBAAA;;EAcAC,eAAe,WAAAA,CAAA;WAAfA,eAAA;;EA2BAC,uBAAuB,WAAAA,CAAA;WAAvBA,uBAAA;;EAQAC,wBAAwB,WAAAA,CAAA;WAAxBA,wBAAA;;;6CAnGoB;AAGpC,MAAMC,mBAAA,GAAsB;IAErBC,YAAA;WAAKA,YAAY;EAAZA,YAAA,CACV;EADUA,YAAA,CAEV;GAFUA,YAAA,KAAAA,YAAA;AAUL,SAASP,iBACdQ,GAAW,EACXC,IAAkB,EAClBC,SAA0B;EAA1B,IAAAA,SAAA,aAAAA,SAAA,GAAqB;EAErB,MAAMC,KAAA,GAAQ,IAAIC,KAAA,CAAMN,mBAAA;EACxBK,KAAA,CAAME,MAAM,GAAGP,mBAAG,GAAoB,MAAGG,IAAA,GAAK,MAAGD,GAAA,GAAI,MAAGE,SAAA;EACxD,MAAMI,YAAA,GAAeC,4BAAA,CAAAC,mBAAmB,CAACC,QAAQ;EACjD,IAAIH,YAAA,EAAc;IAChBH,KAAA,CAAMO,cAAc,GAAGJ,YAAA,CAAaI,cAAc;EACpD;EACA,OAAOP,KAAA;AACT;AASO,SAASV,SACdO,GAAW,EACXC,IAAyC;EAAzC,IAAAA,IAAA,aAAAA,IAAA,GA/BU;EAiCV,MAAMT,gBAAA,CAAiBQ,GAAA,EAAKC,IAAA,EAAM;AACpC;AASO,SAASP,kBACdM,GAAW,EACXC,IAAyC;EAAzC,IAAAA,IAAA,aAAAA,IAAA,GA7CU;EA+CV,MAAMT,gBAAA,CAAiBQ,GAAA,EAAKC,IAAA,EAAM;AACpC;AASO,SAASN,gBACdQ,KAAU;EAEV,IAAI,QAAOA,KAAA,oBAAAA,KAAA,CAAOE,MAAM,MAAK,UAAU,OAAO;EAE9C,MAAM,CAACM,SAAA,EAAWV,IAAA,EAAMW,WAAA,EAAaV,SAAA,CAAU,GAAGC,KAChD,CAAME,MAAM,CACZQ,KAAK,CAAC,KAAK;EAEb,OACEF,SAAA,KAAcb,mBAAA,KACbG,IAAA,KAAS,aAAaA,IAAA,KAAS,MAAK,KACrC,OAAOW,WAAA,KAAgB,aACtBV,SAAA,KAAc,UAAUA,SAAA,KAAc,OAAM;AAEjD;AAYO,SAASN,wBAAwBO,KAAU;EAChD,IAAI,CAACR,eAAA,CAAgBQ,KAAA,GAAQ,OAAO;EAEpC;EACA;EACA,OAAOA,KAAA,CAAME,MAAM,CAACQ,KAAK,CAAC,KAAK,EAAE,CAAC,EAAE;AACtC;AAEO,SAAShB,yBACdM,KAAuB;EAEvB,IAAI,CAACR,eAAA,CAAgBQ,KAAA,GAAQ;IAC3B,MAAM,IAAIC,KAAA,CAAM;EAClB;EAEA,OAAOD,KAAA,CAAME,MAAM,CAACQ,KAAK,CAAC,KAAK,EAAE,CAAC,EAAE;AACtC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}