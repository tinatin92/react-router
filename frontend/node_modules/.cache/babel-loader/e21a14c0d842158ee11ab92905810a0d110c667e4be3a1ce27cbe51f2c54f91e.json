{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n0 && (module.exports = {\n  ReadonlyURLSearchParams: null,\n  useSearchParams: null,\n  usePathname: null,\n  ServerInsertedHTMLContext: null,\n  useServerInsertedHTML: null,\n  useRouter: null,\n  useParams: null,\n  useSelectedLayoutSegments: null,\n  useSelectedLayoutSegment: null,\n  redirect: null,\n  permanentRedirect: null,\n  RedirectType: null,\n  notFound: null\n});\nfunction _export(target, all) {\n  for (var name in all) Object.defineProperty(target, name, {\n    enumerable: true,\n    get: all[name]\n  });\n}\n_export(exports, {\n  ReadonlyURLSearchParams: function () {\n    return ReadonlyURLSearchParams;\n  },\n  useSearchParams: function () {\n    return useSearchParams;\n  },\n  usePathname: function () {\n    return usePathname;\n  },\n  ServerInsertedHTMLContext: function () {\n    return _serverinsertedhtmlsharedruntime.ServerInsertedHTMLContext;\n  },\n  useServerInsertedHTML: function () {\n    return _serverinsertedhtmlsharedruntime.useServerInsertedHTML;\n  },\n  useRouter: function () {\n    return useRouter;\n  },\n  useParams: function () {\n    return useParams;\n  },\n  useSelectedLayoutSegments: function () {\n    return useSelectedLayoutSegments;\n  },\n  useSelectedLayoutSegment: function () {\n    return useSelectedLayoutSegment;\n  },\n  redirect: function () {\n    return _redirect.redirect;\n  },\n  permanentRedirect: function () {\n    return _redirect.permanentRedirect;\n  },\n  RedirectType: function () {\n    return _redirect.RedirectType;\n  },\n  notFound: function () {\n    return _notfound.notFound;\n  }\n});\nconst _react = require(\"react\");\nconst _approutercontextsharedruntime = require(\"../../shared/lib/app-router-context.shared-runtime\");\nconst _hooksclientcontextsharedruntime = require(\"../../shared/lib/hooks-client-context.shared-runtime\");\nconst _clienthookinservercomponenterror = require(\"./client-hook-in-server-component-error\");\nconst _getsegmentvalue = require(\"./router-reducer/reducers/get-segment-value\");\nconst _serverinsertedhtmlsharedruntime = require(\"../../shared/lib/server-inserted-html.shared-runtime\");\nconst _redirect = require(\"./redirect\");\nconst _notfound = require(\"./not-found\");\nconst INTERNAL_URLSEARCHPARAMS_INSTANCE = Symbol(\"internal for urlsearchparams readonly\");\nfunction readonlyURLSearchParamsError() {\n  return new Error(\"ReadonlyURLSearchParams cannot be modified\");\n}\nclass ReadonlyURLSearchParams {\n  [Symbol.iterator]() {\n    return this[INTERNAL_URLSEARCHPARAMS_INSTANCE][Symbol.iterator]();\n  }\n  append() {\n    throw readonlyURLSearchParamsError();\n  }\n  delete() {\n    throw readonlyURLSearchParamsError();\n  }\n  set() {\n    throw readonlyURLSearchParamsError();\n  }\n  sort() {\n    throw readonlyURLSearchParamsError();\n  }\n  constructor(urlSearchParams) {\n    this[INTERNAL_URLSEARCHPARAMS_INSTANCE] = urlSearchParams;\n    this.entries = urlSearchParams.entries.bind(urlSearchParams);\n    this.forEach = urlSearchParams.forEach.bind(urlSearchParams);\n    this.get = urlSearchParams.get.bind(urlSearchParams);\n    this.getAll = urlSearchParams.getAll.bind(urlSearchParams);\n    this.has = urlSearchParams.has.bind(urlSearchParams);\n    this.keys = urlSearchParams.keys.bind(urlSearchParams);\n    this.values = urlSearchParams.values.bind(urlSearchParams);\n    this.toString = urlSearchParams.toString.bind(urlSearchParams);\n    this.size = urlSearchParams.size;\n  }\n}\nfunction useSearchParams() {\n  (0, _clienthookinservercomponenterror.clientHookInServerComponentError)(\"useSearchParams\");\n  const searchParams = (0, _react.useContext)(_hooksclientcontextsharedruntime.SearchParamsContext);\n  // In the case where this is `null`, the compat types added in\n  // `next-env.d.ts` will add a new overload that changes the return type to\n  // include `null`.\n  const readonlySearchParams = (0, _react.useMemo)(() => {\n    if (!searchParams) {\n      // When the router is not ready in pages, we won't have the search params\n      // available.\n      return null;\n    }\n    return new ReadonlyURLSearchParams(searchParams);\n  }, [searchParams]);\n  if (typeof window === \"undefined\") {\n    // AsyncLocalStorage should not be included in the client bundle.\n    const {\n      bailoutToClientRendering\n    } = require(\"./bailout-to-client-rendering\");\n    if (bailoutToClientRendering()) {\n      // TODO-APP: handle dynamic = 'force-static' here and on the client\n      return readonlySearchParams;\n    }\n  }\n  return readonlySearchParams;\n}\nfunction usePathname() {\n  (0, _clienthookinservercomponenterror.clientHookInServerComponentError)(\"usePathname\");\n  // In the case where this is `null`, the compat types added in `next-env.d.ts`\n  // will add a new overload that changes the return type to include `null`.\n  return (0, _react.useContext)(_hooksclientcontextsharedruntime.PathnameContext);\n}\nfunction useRouter() {\n  (0, _clienthookinservercomponenterror.clientHookInServerComponentError)(\"useRouter\");\n  const router = (0, _react.useContext)(_approutercontextsharedruntime.AppRouterContext);\n  if (router === null) {\n    throw new Error(\"invariant expected app router to be mounted\");\n  }\n  return router;\n}\n// this function performs a depth-first search of the tree to find the selected\n// params\nfunction getSelectedParams(tree, params) {\n  if (params === void 0) params = {};\n  const parallelRoutes = tree[1];\n  for (const parallelRoute of Object.values(parallelRoutes)) {\n    const segment = parallelRoute[0];\n    const isDynamicParameter = Array.isArray(segment);\n    const segmentValue = isDynamicParameter ? segment[1] : segment;\n    if (!segmentValue || segmentValue.startsWith(\"__PAGE__\")) continue;\n    // Ensure catchAll and optional catchall are turned into an array\n    const isCatchAll = isDynamicParameter && (segment[2] === \"c\" || segment[2] === \"oc\");\n    if (isCatchAll) {\n      params[segment[0]] = segment[1].split(\"/\");\n    } else if (isDynamicParameter) {\n      params[segment[0]] = segment[1];\n    }\n    params = getSelectedParams(parallelRoute, params);\n  }\n  return params;\n}\nfunction useParams() {\n  (0, _clienthookinservercomponenterror.clientHookInServerComponentError)(\"useParams\");\n  const globalLayoutRouter = (0, _react.useContext)(_approutercontextsharedruntime.GlobalLayoutRouterContext);\n  const pathParams = (0, _react.useContext)(_hooksclientcontextsharedruntime.PathParamsContext);\n  // When it's under app router\n  if (globalLayoutRouter) {\n    return getSelectedParams(globalLayoutRouter.tree);\n  }\n  // When it's under client side pages router\n  return pathParams;\n}\n// TODO-APP: handle parallel routes\n/**\n * Get the canonical parameters from the current level to the leaf node.\n */\nfunction getSelectedLayoutSegmentPath(tree, parallelRouteKey, first, segmentPath) {\n  if (first === void 0) first = true;\n  if (segmentPath === void 0) segmentPath = [];\n  let node;\n  if (first) {\n    // Use the provided parallel route key on the first parallel route\n    node = tree[1][parallelRouteKey];\n  } else {\n    // After first parallel route prefer children, if there's no children pick the first parallel route.\n    const parallelRoutes = tree[1];\n    var _parallelRoutes_children;\n    node = (_parallelRoutes_children = parallelRoutes.children) != null ? _parallelRoutes_children : Object.values(parallelRoutes)[0];\n  }\n  if (!node) return segmentPath;\n  const segment = node[0];\n  const segmentValue = (0, _getsegmentvalue.getSegmentValue)(segment);\n  if (!segmentValue || segmentValue.startsWith(\"__PAGE__\")) return segmentPath;\n  segmentPath.push(segmentValue);\n  return getSelectedLayoutSegmentPath(node, parallelRouteKey, false, segmentPath);\n}\nfunction useSelectedLayoutSegments(parallelRouteKey) {\n  if (parallelRouteKey === void 0) parallelRouteKey = \"children\";\n  (0, _clienthookinservercomponenterror.clientHookInServerComponentError)(\"useSelectedLayoutSegments\");\n  const {\n    tree\n  } = (0, _react.useContext)(_approutercontextsharedruntime.LayoutRouterContext);\n  return getSelectedLayoutSegmentPath(tree, parallelRouteKey);\n}\nfunction useSelectedLayoutSegment(parallelRouteKey) {\n  if (parallelRouteKey === void 0) parallelRouteKey = \"children\";\n  (0, _clienthookinservercomponenterror.clientHookInServerComponentError)(\"useSelectedLayoutSegment\");\n  const selectedLayoutSegments = useSelectedLayoutSegments(parallelRouteKey);\n  if (selectedLayoutSegments.length === 0) {\n    return null;\n  }\n  return selectedLayoutSegments[0];\n}\nif ((typeof exports.default === 'function' || typeof exports.default === 'object' && exports.default !== null) && typeof exports.default.__esModule === 'undefined') {\n  Object.defineProperty(exports.default, '__esModule', {\n    value: true\n  });\n  Object.assign(exports.default, exports);\n  module.exports = exports.default;\n}","map":{"version":3,"names":["ReadonlyURLSearchParams","useSearchParams","usePathname","ServerInsertedHTMLContext","_serverinsertedhtmlsharedruntime","useServerInsertedHTML","useRouter","useParams","useSelectedLayoutSegments","useSelectedLayoutSegment","redirect","_redirect","permanentRedirect","RedirectType","notFound","_notfound","INTERNAL_URLSEARCHPARAMS_INSTANCE","Symbol","readonlyURLSearchParamsError","Error","iterator","append","delete","set","sort","constructor","urlSearchParams","entries","bind","forEach","get","getAll","has","keys","values","toString","size","_clienthookinservercomponenterror","clientHookInServerComponentError","searchParams","_react","useContext","_hooksclientcontextsharedruntime","SearchParamsContext","readonlySearchParams","useMemo","window","bailoutToClientRendering","require","PathnameContext","router","_approutercontextsharedruntime","AppRouterContext","getSelectedParams","tree","params","parallelRoutes","parallelRoute","Object","segment","isDynamicParameter","Array","isArray","segmentValue","startsWith","isCatchAll","split","globalLayoutRouter","GlobalLayoutRouterContext","pathParams","PathParamsContext","getSelectedLayoutSegmentPath","parallelRouteKey","first","segmentPath","node","_parallelRoutes_children","children","_getsegmentvalue","getSegmentValue","push","LayoutRouterContext","selectedLayoutSegments","length"],"sources":["../../../src/client/components/navigation.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}